(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{xp7w:function(e,t,a){"use strict";a.r(t);var r=a("kD0k"),n=a.n(r),i=(a("ls82"),a("/S4K")),s=a("q1tI"),c=a.n(s),l=a("YwZP"),p=a("Wbzz"),u=a("eZYV"),o=a("/p1/"),h=a("0lfv"),d=a("efbE");t.default=function(){var e=Object(l.useLocation)(),t=Object(u.d)(),a=Object(s.useState)("Waiting to be redirected..."),r=a[0],f=a[1];return Object(s.useEffect)((function(){function t(){return(t=Object(i.a)(n.a.mark((function t(){var a,r,i,s,c,l,u,o,b,g;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=new URLSearchParams(e.search),r=a.get("state"),i=a.get("code"),null!==r){t.next=6;break}return f("Invalid state param. This may have happened if you visited this page directly. Try installing the app from the project page."),t.abrupt("return");case 6:if(null!==i){t.next=9;break}return f("Invalid code param. This may have happened if you visited this page directly. Try installing the app from the project page."),t.abrupt("return");case 9:if(s="",null!==(c=a.get("guild_id"))&&(s=c),l="",null!==(u=a.get("permissions"))&&(l=u),o=Object(h.d)(r),0!==Object.keys(o).length){t.next=19;break}return f("Invalid stored state. The app may already be installed on your workspace or you may have tried installing the app directly. Try installing the app from the project page. If the problem persists send us feedback."),t.abrupt("return");case 19:return b={code:i,project:o.projectId,workspace:s,permissions:l},t.prev=20,g=d.ServiceResolver.workspaceServiceResolver(),t.next=24,g.finishAuth(o.workspaceType,b);case 24:t.next=29;break;case 26:t.prev=26,t.t0=t.catch(20),f(t.t0.message);case 29:Object(h.i)(r),Object(p.navigate)(o.redirectUrl);case 31:case"end":return t.stop()}}),t,null,[[20,26]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e.search]),c.a.createElement(o.f,null,c.a.createElement(o.l,{title:"Oauth",description:"Oauth page for "+t.title+" website",urlSlug:"oauth/"}),c.a.createElement(o.c,null,c.a.createElement(o.j,null,"Finishing app install..."),c.a.createElement(o.i,null,c.a.createElement("p",null,r))))}}}]);
//# sourceMappingURL=component---src-pages-oauth-tsx-93e05dbc94ebe93c292b.js.map