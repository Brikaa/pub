(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{b804:function(e,t,a){"use strict";a.r(t);var n=a("Wbzz"),r=a("q1tI"),s=a.n(r),o=a("/p1/"),l=(a("f3/d"),a("M2sk")),c=a("qPwG"),i=a("zj8e"),u=(a("VRzm"),a("Btvt"),a("dRSK"),a("o0o1")),d=a.n(u),m=(a("91GP"),a("ls82"),a("84bF"),a("LvDl")),v=a("vOnD"),f=a("efbE"),p=a("AkCr"),h=a("qShC"),b=a("9VIf"),w=a("sqT6");function g(e,t,a,n,r,s,o){try{var l=e[s](o),c=l.value}catch(i){return void a(i)}l.done?t(c):Promise.resolve(c).then(n,r)}function E(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var s=e.apply(t,a);function o(e){g(s,n,r,o,l,"next",e)}function l(e){g(s,n,r,o,l,"throw",e)}o(void 0)}))}}var S=v.c.small.withConfig({displayName:"profile-content__UsernameCheck",componentId:"sc-3qphev-0"})(["color:",";"],(function(e){return e.isValid?"":"red"})),y=function(e){var t=Object(r.useContext)(w.a),a=Object(r.useState)(t.member),n=a[0],o=a[1],l=Object(r.useState)(t.member.username),c=l[0],u=l[1],v=Object(r.useState)({valid:!0,reason:""}),g=v[0],y=v[1],O=Object(r.useState)(t.member.bio),j=O[0],k=O[1],P=Object(r.useState)(t.member.technologies),x=P[0],C=P[1];Object(r.useEffect)((function(){o(t.member),u(t.member.username),k(t.member.bio),C(t.member.technologies)}),[t.member]);var D=function(){var a=E(d.a.mark((function a(){var r,s,l;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=f.ServiceResolver.apiResolver(),a.prev=1,s=Object.assign({},n,{username:c,bio:j,technologies:x}),a.next=5,r.editUser(s);case 5:l=a.sent,e.handleStatusDisplay&&e.handleStatusDisplay("success","Settings saved"),o(l.data),t.setMember&&t.setMember(s),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),e.handleStatusDisplay&&e.handleStatusDisplay("error",a.t0.message);case 14:case"end":return a.stop()}}),a,null,[[1,11]])})));return function(){return a.apply(this,arguments)}}(),F=function(){var e=E(d.a.mark((function e(t,a){var n,r,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=f.ServiceResolver.apiResolver(),r={username:t},t!=(null==a?void 0:a.username)){e.next=5;break}return y({valid:!0,reason:""}),e.abrupt("return");case 5:return e.prev=5,e.next=8,n.validateUsername(r);case 8:s=e.sent,y(s.data),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),y({valid:!1,reason:"Failed to validate username"});case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,a){return e.apply(this,arguments)}}(),q=Object(r.useCallback)(Object(m.debounce)(F,450),[]);return s.a.createElement(p.e,null,s.a.createElement(i.b,{src:n&&n.profilePictureUrl||b.d,width:"64",height:"64"}),s.a.createElement(p.g,{htmlFor:"username"},"Username"),s.a.createElement(p.f,{type:"text",name:"username",id:"username",value:c,onChange:function(e){return function(e){u(e),y({valid:!0,reason:"checking..."}),q(e,n)}(e.target.value)},hasError:!g.valid}),""!=g.reason&&c!=(null==n?void 0:n.username)&&s.a.createElement(S,{isValid:g.valid},g.reason),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement(p.g,{htmlFor:"bio"},"Bio"),s.a.createElement(p.h,{name:"bio",id:"bio",onChange:function(e){return k(e.target.value)},value:j,rows:5},j),s.a.createElement("br",null),s.a.createElement(p.g,{htmlFor:"technologies"},"Technologies"),s.a.createElement(p.l,{name:"technologies",id:"technologies",setError:function(t){e.handleStatusDisplay&&e.handleStatusDisplay("error",t)},initialValues:x,setTechnologies:function(e){var t=void 0===(null==n?void 0:n.id)?"":n.id,a=Array.isArray(e)?e.map((function(e){var a=x.find((function(t){return t.name==e}));return null==a?{name:e,userId:t}:{name:e,userId:t,id:a.id}})):[];C(a)}}),s.a.createElement(p.a,null,s.a.createElement(h.a,{handleClick:D,statusText:"Saving"},"Save")))};function O(e,t,a,n,r,s,o){try{var l=e[s](o),c=l.value}catch(i){return void a(i)}l.done?t(c):Promise.resolve(c).then(n,r)}var j=v.c.small.withConfig({displayName:"change-password-content__FormMessage",componentId:"sc-1yz6dp-0"})(["color:",";"],(function(e){return e.isValid?"":"red"})),k=function(e){var t=Object(r.useState)(""),a=t[0],n=t[1],o=Object(r.useState)(""),l=o[0],c=o[1],i=Object(r.useState)(""),u=i[0],m=i[1],v=Object(r.useState)(!0),b=v[0],w=v[1],g=Object(r.useState)(""),E=g[0],S=g[1],y=function(){var t,r=(t=d.a.mark((function t(){var r,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==a&&""!==l&&""!==u){t.next=4;break}return S("Provide a value for all fields."),w(!1),t.abrupt("return");case 4:if(l===u){t.next=8;break}return S("New passwords don't match."),w(!1),t.abrupt("return");case 8:return r=f.ServiceResolver.apiResolver(),t.prev=9,s={oldPassword:a,newPassword:l,confirmedNewPassword:u},t.next=13,r.changePassword(s);case 13:n(""),c(""),m(""),e.handleStatusDisplay&&e.handleStatusDisplay("success","Password updated."),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(9),e.handleStatusDisplay&&e.handleStatusDisplay("error",t.t0.message);case 22:case"end":return t.stop()}}),t,null,[[9,19]])})),function(){var e=this,a=arguments;return new Promise((function(n,r){var s=t.apply(e,a);function o(e){O(s,n,r,o,l,"next",e)}function l(e){O(s,n,r,o,l,"throw",e)}o(void 0)}))});return function(){return r.apply(this,arguments)}}();return s.a.createElement(p.e,null,s.a.createElement(p.g,{htmlFor:"old-password"},"Old Password"),s.a.createElement(p.f,{type:"password",name:"old-password",id:"old-password",value:a,onChange:function(e){return t=e.target.value,void n(t);var t},hasError:!1,required:!0,alt:"password-field"}),s.a.createElement("br",null),s.a.createElement(p.g,{htmlFor:"new-password"},"New Password"),s.a.createElement(p.f,{type:"password",name:"new-password",id:"new-password",value:l,onChange:function(e){return t=e.target.value,void c(t);var t},hasError:!1,required:!0,alt:"password-field"}),s.a.createElement("br",null),s.a.createElement(p.g,{htmlFor:"confirmed-new-password"},"Confirm New Password"),s.a.createElement(p.f,{type:"password",name:"confirmed-new-password",id:"confirmed-new-password",value:u,onChange:function(e){return t=e.target.value,void m(t);var t},hasError:!1,required:!0,alt:"password-field"}),s.a.createElement("br",null),""!==E&&s.a.createElement(j,{isValid:b},E),s.a.createElement(p.a,null,s.a.createElement(h.a,{handleClick:y,statusText:"Saving"},"Save")))},P=[{name:"Change Password",content:s.a.createElement(k,null)},{name:"Edit Profile",content:s.a.createElement(y,null)}],x=a("ll4v"),C=function(){var e=Object(r.useState)(null),t=e[0],a=e[1],n=Object(r.useState)(null),o=n[0],u=n[1],d=Object(r.useState)(P[0].name),m=d[0],v=d[1];return s.a.createElement(c.b,{error:t,setError:a,success:o,setSuccess:u,isLoading:!1},s.a.createElement(i.a,null,P.map((function(e){return s.a.createElement(x.c,{onClick:function(){return t=e.name,void v(t);var t},key:e.name,active:e.name===m},e.name)}))),s.a.createElement(l.a,null,function(e,t){switch(e){case"Change Password":return s.a.createElement(k,t);case"Edit Profile":return s.a.createElement(y,t)}}(m,{handleStatusDisplay:function(e,t){switch(e){case"success":u(t);break;case"error":a(t)}}})))},D=a("woEc"),F=a("eZYV");t.default=function(){var e=Object(F.d)();return Object(r.useEffect)((function(){D.b.isUserAuthenticated()||Object(n.navigate)("/signin",{state:{message:"You need to be signed in to edit your account settings"}})}),[]),s.a.createElement(o.f,null,s.a.createElement(o.l,{title:"Account Settings",description:"Account Settings Page For "+e.title,urlSlug:"settings/"}),s.a.createElement(C,null))}}}]);
//# sourceMappingURL=component---src-pages-settings-tsx-9c01bf679db2bab2bb00.js.map